services:

  udashboard.context:
    class: MakinaCorpus\Dashboard\Drupal\Context\ContextPane
    arguments: ['@event_dispatcher', '@request_stack']

  udashboard.page_builder_factory:
    class: MakinaCorpus\Dashboard\Page\PageBuilderFactory
    arguments: ['@service_container', '@form.factory', '@udashboard.action_provider_registry', '@twig', '@event_dispatcher']

  udashboard.processor_registry:
    class: MakinaCorpus\Dashboard\Drupal\Action\ProcessorActionProvider
    tags: [{name: udashboard.action_provider}]

  udashboard.action_provider_registry:
    public: false
    class: MakinaCorpus\Dashboard\Action\ActionRegistry

  udashboard.portlet_registry:
    class: MakinaCorpus\Dashboard\Drupal\Portlet\PortletRegistry

  udashboard.twig.action_extension:
    public: false
    class: MakinaCorpus\Dashboard\Drupal\Twig\Extension\ActionExtension
    arguments: ['@udashboard.action_provider_registry']
    tags: [{name: twig.extension}]

  udashboard.twig.page_extension:
    public: false
    class: MakinaCorpus\Dashboard\Twig\PageExtension
    arguments: ['@request_stack']
    tags: [{name: twig.extension}]

  udashboard.empty_page_builder:
    public: false
    shared: false
    class: MakinaCorpus\Dashboard\\PageBuilder
    factory: ['@udashboard.page_builder_factory', createPageBuilder]

  # Default node datasource, this is registered as an example only, copy/paste
  # and adapt this to declare your datasources.
  udashboard.datasource.node_default:
    public: false
    class: MakinaCorpus\Dashboard\Drupal\Page\Node\DefaultNodeDatasource
    arguments: ["@database", "@entity.manager"]

  # Default node page builder, this is registered as an example only, copy/paste
  # and adapt this to declare your page builders.
  udashboard.page.node_default:
    class: MakinaCorpus\Dashboard\Drupal\Page\Node\DefaultNodeAdminPage
    arguments: ['@udashboard.datasource.node_default', false]
    tags: [{name: udashboard.page_definition, id: 'node.default'}]

  udashboard.pagebuilder_event_subscriber:
    class: MakinaCorpus\Dashboard\Drupal\Event\PageBuilderEventSubscriber
    tags: [{name: event_subscriber}]
